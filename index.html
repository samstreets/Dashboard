<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NEXUS // Dashboard</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;500;700&display=swap" rel="stylesheet">
<style>
  :root {
    --bg:        #04050d;
    --surface:   #070810;
    --surface2:  #0b0d1a;
    --border:    #1a1d35;
    --borderg:   #2a2f5a;
    --cyan:      #00f5ff;
    --magenta:   #ff006e;
    --yellow:    #f5c400;
    --green:     #00ff88;
    --text:      #c8cff5;
    --muted:     #3a3f6a;
    --up:        #00ff88;
    --down:      #ff006e;
    --pending:   #f5c400;
    --fmono:     'Share Tech Mono', monospace;
    --fhead:     'Orbitron', monospace;
    --fbody:     'Rajdhani', sans-serif;
  }
  *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
  html{scroll-behavior:smooth}
  body{background:var(--bg);color:var(--text);font-family:var(--fbody);min-height:100vh;overflow-x:hidden}

  /* scanlines */
  body::before{content:'';position:fixed;inset:0;background:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,245,255,.012) 2px,rgba(0,245,255,.012) 4px);pointer-events:none;z-index:9999}
  /* grid bg */
  body::after{content:'';position:fixed;inset:0;background-image:linear-gradient(rgba(0,245,255,.04) 1px,transparent 1px),linear-gradient(90deg,rgba(0,245,255,.04) 1px,transparent 1px);background-size:60px 60px;pointer-events:none;z-index:0}

  .layout{position:relative;z-index:1;max-width:1500px;margin:0 auto;padding:20px 20px 60px}

  /* HEADER */
  header{display:grid;grid-template-columns:1fr auto 1fr;align-items:center;padding:16px 0 20px;margin-bottom:24px;border-bottom:1px solid var(--border);position:relative}
  header::after{content:'';position:absolute;bottom:-1px;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,var(--cyan),var(--magenta),transparent);opacity:.5}
  .logo{font-family:var(--fhead);font-size:1.5rem;font-weight:900;letter-spacing:.1em;color:var(--cyan);text-shadow:0 0 20px rgba(0,245,255,.6),0 0 40px rgba(0,245,255,.2)}
  .logo em{color:var(--magenta);font-style:normal;text-shadow:0 0 20px rgba(255,0,110,.6)}
  .sys-status{font-family:var(--fmono);font-size:.6rem;letter-spacing:.15em;color:var(--muted);text-align:center;text-transform:uppercase}
  .sys-status .ok{color:var(--green)} .sys-status .warn{color:var(--yellow)}
  .header-right{text-align:right}
  .clock{font-family:var(--fmono);font-size:.85rem;color:var(--cyan);letter-spacing:.1em}
  .dateline{font-family:var(--fmono);font-size:.6rem;color:var(--muted);letter-spacing:.08em;margin-top:2px}

  /* CONFIG NOTICE */
  .config-notice{background:rgba(245,196,0,.05);border:1px solid rgba(245,196,0,.25);border-left:3px solid var(--yellow);border-radius:4px;padding:10px 14px;font-family:var(--fmono);font-size:.68rem;color:var(--yellow);margin-bottom:20px;display:none;gap:10px;align-items:center}

  /* MAIN GRID */
  .main-grid{display:grid;grid-template-columns:1fr 300px;gap:14px}
  @media(max-width:960px){.main-grid{grid-template-columns:1fr}}

  /* CARD */
  .card{background:var(--surface);border:1px solid var(--border);border-radius:2px;padding:18px;position:relative;animation:fadeUp .5s ease both;overflow:hidden}
  .card::before{content:'';position:absolute;top:-1px;left:-1px;width:12px;height:12px;border-top:2px solid var(--cyan);border-left:2px solid var(--cyan)}
  .card::after{content:'';position:absolute;bottom:-1px;right:-1px;width:12px;height:12px;border-bottom:2px solid var(--magenta);border-right:2px solid var(--magenta)}

  .card-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px;padding-bottom:10px;border-bottom:1px solid var(--border);position:relative}
  .card-header::after{content:'';position:absolute;bottom:-1px;left:0;width:60px;height:1px;background:var(--cyan);box-shadow:0 0 8px var(--cyan)}
  .card-title{font-family:var(--fhead);font-size:.6rem;font-weight:700;letter-spacing:.2em;color:var(--cyan);text-transform:uppercase;display:flex;align-items:center;gap:8px}
  .card-title .tag{font-family:var(--fmono);font-size:.55rem;color:var(--muted);letter-spacing:.05em}
  .refresh-btn{background:none;border:1px solid var(--borderg);border-radius:2px;color:var(--muted);font-family:var(--fmono);font-size:.6rem;padding:3px 9px;cursor:pointer;letter-spacing:.08em;transition:all .2s}
  .refresh-btn:hover{border-color:var(--cyan);color:var(--cyan);box-shadow:0 0 8px rgba(0,245,255,.2)}

  /* SUMMARY */
  .summary-row{display:flex;gap:10px;margin-bottom:14px;flex-wrap:wrap}
  .stat-pill{font-family:var(--fmono);font-size:.63rem;display:flex;align-items:center;gap:5px;padding:3px 10px;border-radius:2px;border:1px solid var(--border);background:var(--surface2)}
  .stat-pill.up{border-color:rgba(0,255,136,.3);color:var(--up)}
  .stat-pill.down{border-color:rgba(255,0,110,.3);color:var(--down)}
  .stat-pill.total{color:var(--muted)}

  /* MONITORS */
  #monitors-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(185px,1fr));gap:8px}
  .monitor-item{background:var(--surface2);border:1px solid var(--border);border-radius:2px;padding:11px 13px;display:flex;flex-direction:column;gap:6px;transition:border-color .2s,box-shadow .2s;position:relative;overflow:hidden}
  .monitor-item::before{content:'';position:absolute;left:0;top:0;bottom:0;width:2px}
  .monitor-item.is-up::before{background:var(--up);box-shadow:0 0 6px var(--up)}
  .monitor-item.is-down{border-color:rgba(255,0,110,.3);box-shadow:inset 0 0 20px rgba(255,0,110,.06)}
  .monitor-item.is-down::before{background:var(--down);box-shadow:0 0 6px var(--down)}
  .monitor-item.is-pending::before{background:var(--pending)}
  .monitor-item.is-up:hover{border-color:rgba(0,255,136,.4);box-shadow:inset 0 0 20px rgba(0,255,136,.04)}
  .monitor-name{font-family:var(--fbody);font-size:.85rem;font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-left:6px}
  .monitor-meta{display:flex;align-items:center;justify-content:space-between;padding-left:6px}
  .monitor-label{font-family:var(--fmono);font-size:.62rem;letter-spacing:.06em}
  .monitor-label.up{color:var(--up)} .monitor-label.down{color:var(--down)} .monitor-label.pending{color:var(--pending)}
  .monitor-uptime{font-family:var(--fmono);font-size:.62rem;color:var(--muted)}
  .uptime-bar{height:2px;border-radius:1px;background:var(--border);overflow:hidden;margin-left:6px}
  .uptime-fill{height:100%;border-radius:1px;transition:width 1.2s ease}
  .uptime-fill.up{background:var(--up);box-shadow:0 0 4px var(--up)}
  .uptime-fill.down{background:var(--down)}
  .uptime-fill.pending{background:var(--pending)}

  /* ALERTS */
  #alerts-list{display:flex;flex-direction:column;gap:8px;max-height:440px;overflow-y:auto}
  #alerts-list::-webkit-scrollbar{width:4px}
  #alerts-list::-webkit-scrollbar-track{background:var(--surface2)}
  #alerts-list::-webkit-scrollbar-thumb{background:var(--borderg)}
  .alert-item{background:var(--surface2);border:1px solid var(--border);border-radius:2px;padding:10px 12px;position:relative;overflow:hidden;animation:fadeUp .3s ease both}
  .alert-item::before{content:'';position:absolute;left:0;top:0;bottom:0;width:2px;background:var(--magenta);box-shadow:0 0 8px var(--magenta)}
  .alert-item.resolved::before{background:var(--up);box-shadow:0 0 8px var(--up)}
  .alert-severity{font-family:var(--fmono);font-size:.55rem;letter-spacing:.15em;text-transform:uppercase;color:var(--magenta);margin-bottom:3px}
  .alert-item.resolved .alert-severity{color:var(--up)}
  .alert-title{font-size:.82rem;font-weight:700;margin-bottom:3px;color:var(--text)}
  .alert-time{font-family:var(--fmono);font-size:.6rem;color:var(--muted)}
  .no-alerts{text-align:center;padding:32px 0;color:var(--up);font-family:var(--fmono);font-size:.72rem;letter-spacing:.1em}

  /* SHORTCUTS */
  #shortcuts-card{grid-column:1/-1}
  .apps-section{margin-bottom:18px}
  .apps-section:last-child{margin-bottom:0}
  .apps-section-label{font-family:var(--fmono);font-size:.58rem;letter-spacing:.2em;color:var(--muted);text-transform:uppercase;margin-bottom:10px;display:flex;align-items:center;gap:10px}
  .apps-section-label::after{content:'';flex:1;height:1px;background:var(--border)}
  .apps-grid-inner{display:grid;grid-template-columns:repeat(auto-fill,minmax(100px,1fr));gap:8px}

  .app-link{background:var(--surface2);border:1px solid var(--border);border-radius:2px;padding:14px 8px 11px;display:flex;flex-direction:column;align-items:center;gap:7px;text-decoration:none;color:var(--text);font-size:.72rem;font-weight:700;text-align:center;transition:all .18s;position:relative;overflow:hidden;animation:fadeUp .4s ease both;letter-spacing:.02em}
  .app-link::before{content:'';position:absolute;top:0;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,var(--cyan),transparent);opacity:0;transition:opacity .2s}
  .app-link:hover::before{opacity:1}
  .app-link:hover{border-color:var(--cyan);box-shadow:0 0 20px rgba(0,245,255,.08),inset 0 0 20px rgba(0,245,255,.04);transform:translateY(-2px);color:var(--cyan)}
  .app-link.internal:hover{border-color:var(--magenta);box-shadow:0 0 20px rgba(255,0,110,.08),inset 0 0 20px rgba(255,0,110,.04);color:var(--magenta)}
  .app-link.internal::before{background:linear-gradient(90deg,transparent,var(--magenta),transparent)}
  .app-icon{width:36px;height:36px;border-radius:4px;display:flex;align-items:center;justify-content:center;font-size:1.25rem;background:var(--border);flex-shrink:0;transition:transform .2s}
  .app-link:hover .app-icon{transform:scale(1.1)}
  .app-badge{position:absolute;top:4px;right:4px;font-family:var(--fmono);font-size:.45rem;letter-spacing:.08em;padding:1px 4px;border-radius:2px;text-transform:uppercase}
  .app-badge.local{background:rgba(255,0,110,.15);color:var(--magenta);border:1px solid rgba(255,0,110,.25)}
  .app-badge.public{background:rgba(0,245,255,.1);color:var(--cyan);border:1px solid rgba(0,245,255,.2)}

  /* LOADING / ERROR */
  .loading-pulse{height:70px;display:flex;align-items:center;justify-content:center;color:var(--muted);font-family:var(--fmono);font-size:.7rem;letter-spacing:.1em;gap:10px}
  .loading-pulse::before{content:'';width:6px;height:6px;border-radius:50%;background:var(--cyan);box-shadow:0 0 8px var(--cyan);animation:blink 1s ease infinite}
  .error-msg{font-family:var(--fmono);font-size:.68rem;color:var(--down);padding:12px 0;display:flex;gap:8px;align-items:flex-start;letter-spacing:.04em}

  @keyframes fadeUp{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
  @keyframes blink{0%,100%{opacity:1}50%{opacity:.2}}
  .card:nth-child(1){animation-delay:.05s}.card:nth-child(2){animation-delay:.12s}.card:nth-child(3){animation-delay:.2s}
</style>
</head>
<body>

<div class="layout">

<!-- ============================================================
  âš™ï¸  CONFIGURATION â€” edit this block to set up your instance
  ============================================================ -->
<script>
const CONFIG = {
  // â”€â”€ Branding â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  title: "NEXUS",

  // â”€â”€ Uptime Kuma â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // Your public Uptime Kuma Status Page API URL.
  // In Kuma: Status Pages â†’ your page â†’ the slug is in the URL.
  // API format: https://YOUR_KUMA_HOST/api/status-page/YOUR_SLUG
  // Example: "https://status.yourdomain.com/api/status-page/main"
  // Leave "" to show demo data.
  uptimeKumaUrl: "https://tight-wildflower-d4f9.samuel-streets.workers.dev/dashboard",

  // If Kuma is on a private network and you get CORS errors:
  // corsProxy: "https://corsproxy.io/?"
  corsProxy: "",

  // Auto-refresh interval in seconds (0 = disabled)
  refreshInterval: 60,

  // â”€â”€ Bezel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // Your Bezel alerts API endpoint.
  // Expected JSON: array of { title, time, resolved, severity? }
  // Example: "https://bezel.yourdomain.com/api/v1/alerts"
  // Leave "" to show demo alerts.
  bezelUrl: "https://beszel.streetsservices.co.uk/api/v1/alerts",

  // â”€â”€ App Shortcuts â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // type: "internal" = homelab/local (magenta glow on hover)
  //       "public"   = external web app (cyan glow on hover)
  // icon: emoji string, or a full image URL / favicon path
  apps: [
    // â€” Internal / Homelab â€”
    { name: "Uptime Kuma",  url: "https://uptime.local",         icon: "ğŸ“¡", type: "internal" },
    { name: "Portainer",    url: "https://portainer.local:9000", icon: "ğŸ³", type: "internal" },
    { name: "Proxmox",      url: "https://proxmox.local:8006",   icon: "ğŸ–¥ï¸", type: "internal" },
    { name: "Home Assist",  url: "https://homeassistant.local",  icon: "ğŸ ", type: "internal" },
    { name: "Grafana",      url: "https://grafana.local:3000",   icon: "ğŸ“Š", type: "internal" },
    { name: "Jellyfin",     url: "https://jellyfin.local",       icon: "ğŸ¬", type: "internal" },
    { name: "Nextcloud",    url: "https://cloud.local",          icon: "â˜ï¸", type: "internal" },
    { name: "PiHole",       url: "http://pihole.local/admin",    icon: "ğŸ”’", type: "internal" },
    { name: "Vaultwarden",  url: "https://vault.local",          icon: "ğŸ”‘", type: "internal" },
    { name: "Traefik",      url: "https://traefik.local",        icon: "ğŸŒ", type: "internal" },
    { name: "Bezel",        url: "https://bezel.local",          icon: "ğŸ””", type: "internal" },
    // â€” External / Public â€”
    { name: "GitHub",       url: "https://github.com",           icon: "ğŸ™", type: "public" },
    { name: "ChatGPT",      url: "https://chat.openai.com",      icon: "ğŸ¤–", type: "public" },
    { name: "Google",       url: "https://google.com",           icon: "ğŸ”", type: "public" },
    { name: "Gmail",        url: "https://mail.google.com",      icon: "ğŸ“§", type: "public" },
    { name: "YouTube",      url: "https://youtube.com",          icon: "â–¶ï¸", type: "public" },
  ]
};
</script>
<!-- ============================================================ -->

<header>
  <div class="logo" id="dash-logo">NEXUS</div>
  <div class="sys-status" id="sys-status">SYSTEM <span class="ok">NOMINAL</span></div>
  <div class="header-right">
    <div class="clock" id="clock">--:--:--</div>
    <div class="dateline" id="dateline">--- -- ----</div>
  </div>
</header>

<div class="config-notice" id="config-notice">
  âš  &nbsp;DEMO MODE â€” set <code>uptimeKumaUrl</code> and <code>bezelUrl</code> in the CONFIG block above.
</div>

<div class="main-grid">

  <!-- UPTIME KUMA -->
  <div class="card">
    <div class="card-header">
      <div class="card-title">UPTIME KUMA <span class="tag">// status_page_api</span></div>
      <button class="refresh-btn" onclick="loadKuma()">â†» SYNC</button>
    </div>
    <div class="summary-row" id="kuma-summary"></div>
    <div id="monitors-grid"><div class="loading-pulse">INITIALISING MONITORS</div></div>
  </div>

  <!-- BEZEL ALERTS -->
  <div class="card">
    <div class="card-header">
      <div class="card-title">BEZEL <span class="tag">// alerts</span></div>
      <button class="refresh-btn" onclick="loadBezel()">â†» SYNC</button>
    </div>
    <div id="alerts-list"><div class="loading-pulse">SCANNING</div></div>
  </div>

  <!-- APP SHORTCUTS -->
  <div class="card" id="shortcuts-card">
    <div class="card-header">
      <div class="card-title">QUICK ACCESS <span class="tag">// shortcuts</span></div>
    </div>
    <div class="apps-section">
      <div class="apps-section-label">Internal // Homelab</div>
      <div class="apps-grid-inner" id="apps-internal"></div>
    </div>
    <div class="apps-section">
      <div class="apps-section-label">External // Public</div>
      <div class="apps-grid-inner" id="apps-public"></div>
    </div>
  </div>

</div><!-- /main-grid -->
</div><!-- /layout -->

<script>
/* â”€â”€â”€ DEMO DATA â”€â”€â”€ */
const DEMO_MONITORS = [
  {name:'Web Server',   status:1, uptime:99.95},
  {name:'Database',     status:1, uptime:99.80},
  {name:'API Gateway',  status:1, uptime:100  },
  {name:'Mail Server',  status:0, uptime:87.20},
  {name:'VPN',          status:1, uptime:99.99},
  {name:'DNS Resolver', status:1, uptime:100  },
  {name:'NAS Storage',  status:2, uptime:95.10},
  {name:'Backup Agent', status:1, uptime:98.55},
];
const DEMO_ALERTS = [
  {title:'Mail Server is DOWN',         time:'14 mins ago', resolved:false, severity:'CRITICAL'},
  {title:'High CPU on node-01',          time:'1 hr ago',   resolved:false, severity:'WARNING' },
  {title:'NAS disk usage above 85%',     time:'2 hrs ago',  resolved:false, severity:'WARNING' },
  {title:'Backup completed with errors', time:'6 hrs ago',  resolved:true,  severity:'RESOLVED'},
];

/* â”€â”€â”€ CLOCK â”€â”€â”€ */
function updateClock() {
  const n = new Date();
  document.getElementById('clock').textContent =
    n.toLocaleTimeString('en-GB',{hour:'2-digit',minute:'2-digit',second:'2-digit'});
  document.getElementById('dateline').textContent =
    n.toLocaleDateString('en-GB',{weekday:'short',day:'2-digit',month:'short',year:'numeric'}).toUpperCase();
}
setInterval(updateClock, 1000);
updateClock();

/* â”€â”€â”€ UPTIME KUMA â”€â”€â”€ */
async function loadKuma() {
  const grid = document.getElementById('monitors-grid');
  const summ = document.getElementById('kuma-summary');
  grid.innerHTML = '<div class="loading-pulse">FETCHING MONITORS</div>';
  summ.innerHTML = '';

  if (!CONFIG.uptimeKumaUrl) {
    document.getElementById('config-notice').style.display = 'flex';
    renderMonitors(DEMO_MONITORS, grid, summ);
    return;
  }
  try {
    const res  = await fetch(CONFIG.corsProxy + CONFIG.uptimeKumaUrl);
    if (!res.ok) throw new Error('HTTP ' + res.status);
    const data = await res.json();
    const monitors = [];
    (data.publicGroupList || []).forEach(g => {
      (g.monitorList || []).forEach(m => {
        monitors.push({
          name:   m.name,
          status: m.status,
          uptime: typeof m.uptime === 'number' ? parseFloat((m.uptime * 100).toFixed(2)) : null
        });
      });
    });
    renderMonitors(monitors.length ? monitors : DEMO_MONITORS, grid, summ);
    updateSysStatus(monitors);
  } catch(e) {
    grid.innerHTML = '<div class="error-msg">âš  KUMA UNREACHABLE â€” ' + e.message + '. Check URL &amp; CORS in CONFIG.</div>';
  }
}

function renderMonitors(monitors, grid, summ) {
  const up   = monitors.filter(m => m.status === 1).length;
  const down = monitors.filter(m => m.status === 0).length;
  const pend = monitors.filter(m => m.status === 2).length;
  summ.innerHTML =
    '<div class="stat-pill up">â–² ' + up + ' UP</div>' +
    (down ? '<div class="stat-pill down">â–¼ ' + down + ' DOWN</div>' : '') +
    (pend ? '<div class="stat-pill" style="color:var(--pending);border-color:rgba(245,196,0,.3)">â—† ' + pend + ' PENDING</div>' : '') +
    '<div class="stat-pill total">' + monitors.length + ' MONITORS</div>';

  grid.innerHTML = monitors.map((m, i) => {
    const cls   = m.status === 1 ? 'up' : m.status === 0 ? 'down' : 'pending';
    const label = m.status === 1 ? 'OPERATIONAL' : m.status === 0 ? 'DOWN' : 'PENDING';
    const upt   = m.uptime != null ? m.uptime : null;
    return '<div class="monitor-item is-' + cls + '" style="animation-delay:' + (i * 0.035) + 's">' +
      '<div class="monitor-name">' + m.name + '</div>' +
      '<div class="monitor-meta">' +
        '<span class="monitor-label ' + cls + '">' + label + '</span>' +
        (upt != null ? '<span class="monitor-uptime">' + upt + '%</span>' : '') +
      '</div>' +
      (upt != null ? '<div class="uptime-bar"><div class="uptime-fill ' + cls + '" style="width:' + upt + '%"></div></div>' : '') +
    '</div>';
  }).join('');
}

function updateSysStatus(monitors) {
  const down = monitors.filter(m => m.status === 0).length;
  const el   = document.getElementById('sys-status');
  el.innerHTML = down > 0
    ? 'SYSTEM <span class="warn">' + down + ' SERVICE' + (down > 1 ? 'S' : '') + ' DOWN</span>'
    : 'SYSTEM <span class="ok">NOMINAL</span>';
}

/* â”€â”€â”€ BEZEL â”€â”€â”€ */
async function loadBezel() {
  const list = document.getElementById('alerts-list');
  list.innerHTML = '<div class="loading-pulse">SCANNING ALERTS</div>';

  if (!CONFIG.bezelUrl) { renderAlerts(DEMO_ALERTS, list); return; }
  try {
    const res  = await fetch(CONFIG.corsProxy + CONFIG.bezelUrl);
    if (!res.ok) throw new Error('HTTP ' + res.status);
    const data = await res.json();
    renderAlerts(Array.isArray(data) ? data : (data.alerts || []), list);
  } catch(e) {
    list.innerHTML = '<div class="error-msg">âš  BEZEL UNREACHABLE â€” ' + e.message + '</div>';
  }
}

function renderAlerts(alerts, list) {
  if (!alerts.length) {
    list.innerHTML = '<div class="no-alerts">âœ“ ALL CLEAR â€” NO ACTIVE ALERTS</div>';
    return;
  }
  list.innerHTML = alerts.map((a, i) =>
    '<div class="alert-item' + (a.resolved ? ' resolved' : '') + '" style="animation-delay:' + (i * 0.05) + 's">' +
      '<div class="alert-severity">' + (a.severity || (a.resolved ? 'RESOLVED' : 'ALERT')) + '</div>' +
      '<div class="alert-title">' + a.title + '</div>' +
      '<div class="alert-time">' + (a.time || '') + '</div>' +
    '</div>'
  ).join('');
}

/* â”€â”€â”€ APP SHORTCUTS â”€â”€â”€ */
function renderApps() {
  const internal = CONFIG.apps.filter(a => a.type === 'internal');
  const pub      = CONFIG.apps.filter(a => a.type === 'public');

  function buildGrid(apps, id) {
    document.getElementById(id).innerHTML = apps.map((a, i) => {
      const isImg = a.icon && (a.icon.startsWith('http') || a.icon.startsWith('/'));
      const iconHtml = isImg
        ? '<div class="app-icon" style="background:transparent"><img src="' + a.icon + '" style="width:32px;height:32px;border-radius:4px;object-fit:cover"></div>'
        : '<div class="app-icon">' + a.icon + '</div>';
      return '<a class="app-link ' + a.type + '" href="' + a.url + '" target="_blank" rel="noopener" style="animation-delay:' + (i * 0.03) + 's">' +
        '<span class="app-badge ' + (a.type === 'internal' ? 'local' : 'public') + '">' + (a.type === 'internal' ? 'LOCAL' : 'WEB') + '</span>' +
        iconHtml +
        '<span>' + a.name + '</span>' +
      '</a>';
    }).join('');
  }

  buildGrid(internal, 'apps-internal');
  buildGrid(pub,      'apps-public');
}

/* â”€â”€â”€ BOOT â”€â”€â”€ */
function init() {
  renderApps();
  loadKuma();
  loadBezel();
  if (CONFIG.refreshInterval > 0)
    setInterval(() => { loadKuma(); loadBezel(); }, CONFIG.refreshInterval * 1000);
}
init();
</script>
</body>
</html>
